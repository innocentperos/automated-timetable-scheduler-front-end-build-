import{u as Qe}from"./timetables-store.awZnM9r_.js";import{E as O,F as z,v as D,b as e,ba as Ze,bf as J,K as F,b7 as X,bg as qe,r as Y,d as T,b3 as Te,f as Ae,L as B,ab as Ie,W as Ye,ah as Je,aa as Xe,I as te,G as et,a3 as tt,h as de,Q as K,n as Ee,bh as at,T as We,o as g,c as P,w as a,z as k,t as W,A as H,y as ae,Z as _e,D as ye,a as _,p as Ne,e as Be,_ as $e,C as be,B as xe,bi as lt,x as nt}from"./entry.tQWHpBLf.js";import{u as je}from"./use-fetch-header.3DHnPbz-.js";import{u as G}from"./use-notification.Rdal1ke4.js";import{p as st,W as ge,a as re,b as ce}from"./types.H3O6Ekup.js";import{b as U,c as ot}from"./index.qvKOBlyP.js";import{V as ue,a as me,b as fe}from"./VExpansionPanel.ju_wnrv-.js";import{u as Z,d as Oe,V as N,a as p}from"./VRow.WlLBb9Jc.js";import{a as ve}from"./VAvatar.NX62-iRj.js";import{a as ne,V as L}from"./index.AmeJTHgO.js";import{V as it}from"./VSlider.-G8zbL2h.js";import{V as q}from"./VDivider.KeqwIEcH.js";import{V as dt}from"./VCheckbox.SuWXhtYw.js";import{V as ee}from"./VProgressCircular.DTBbBXDU.js";import{V as $}from"./VBtn._oQ1uiNP.js";import{V as le}from"./VSpacer.t62wCS3Z.js";import{M as rt}from"./transition.31NosCAE.js";import{c as ct}from"./createSimpleFunctional.413Od-xt.js";import{m as ut,V as Ve}from"./VSheet.C_PFHFB9.js";import{V as pe,a as Q,b as he}from"./VList.lljtylUW.js";import{V as mt}from"./VTooltip.gJvVvmRp.js";import{V as ft}from"./VExpansionPanels.Cp-9pIPO.js";import{V as vt}from"./VToolbar.tLNW-9Tn.js";import{V as ht}from"./VNavigationDrawer.Qf0a9uN4.js";import{V as kt}from"./VAlert.9L9TAqJu.js";import{V as _t,b as yt}from"./VCard.T8BHTP73.js";import{V as pt,b as bt}from"./VWindowItem.1NJacqKo.js";import{V as xt}from"./VOverlay.1V9m9YmJ.js";import{V as gt}from"./VContainer.HgjfEFlY.js";import"./lazy.hsVx4m50.js";import"./VInput.AAxW8xuy.js";import"./VCheckboxBtn.ztQGvB4X.js";import"./ssrBoot.0aXw1rzb.js";import"./forwardRefs.y8pOSn8h.js";import"./layout.RwfjoJ97.js";import"./easing.imumzmxr.js";const Re=O({active:{type:[String,Array],default:void 0},disabled:{type:[Boolean,String,Array],default:!1},nextIcon:{type:[String],default:"$next"},prevIcon:{type:[String],default:"$prev"},modeIcon:{type:[String],default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),we=z()({name:"VDatePickerControls",props:Re(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(t,o){let{emit:r}=o;const n=D(()=>Array.isArray(t.disabled)?t.disabled.includes("text"):!!t.disabled),s=D(()=>Array.isArray(t.disabled)?t.disabled.includes("mode"):!!t.disabled),v=D(()=>Array.isArray(t.disabled)?t.disabled.includes("prev"):!!t.disabled),c=D(()=>Array.isArray(t.disabled)?t.disabled.includes("next"):!!t.disabled);function i(){r("click:prev")}function f(){r("click:next")}function u(){r("click:year")}function l(){r("click:month")}return Z(()=>e("div",{class:["v-date-picker-controls"]},[e($,{class:"v-date-picker-controls__month-btn",disabled:n.value,text:t.text,variant:"text",rounded:!0,onClick:l},null),e($,{key:"mode-btn",class:"v-date-picker-controls__mode-btn",disabled:s.value,density:"comfortable",icon:t.modeIcon,variant:"text",onClick:u},null),e(le,{key:"mode-spacer"},null),e("div",{key:"month-buttons",class:"v-date-picker-controls__month"},[e($,{disabled:v.value,icon:t.prevIcon,variant:"text",onClick:i},null),e($,{disabled:c.value,icon:t.nextIcon,variant:"text",onClick:f},null)])])),{}}}),Vt=O({appendIcon:String,color:String,header:String,transition:String,onClick:Ze()},"VDatePickerHeader"),De=z()({name:"VDatePickerHeader",props:Vt(),emits:{click:()=>!0,"click:append":()=>!0},setup(t,o){let{emit:r,slots:n}=o;const{backgroundColorClasses:s,backgroundColorStyles:v}=Oe(t,"color");function c(){r("click")}function i(){r("click:append")}return Z(()=>{const f=!!(n.default||t.header),u=!!(n.append||t.appendIcon);return e("div",{class:["v-date-picker-header",{"v-date-picker-header--clickable":!!t.onClick},s.value],style:v.value,onClick:c},[n.prepend&&e("div",{key:"prepend",class:"v-date-picker-header__prepend"},[n.prepend()]),f&&e(rt,{key:"content",name:t.transition},{default:()=>{var l;return[e("div",{key:t.header,class:"v-date-picker-header__content"},[((l=n.default)==null?void 0:l.call(n))??t.header])]}}),u&&e("div",{class:"v-date-picker-header__append"},[n.append?e(ne,{key:"append-defaults",disabled:!t.appendIcon,defaults:{VBtn:{icon:t.appendIcon,variant:"text"}}},{default:()=>{var l;return[(l=n.append)==null?void 0:l.call(n)]}}):e($,{key:"append-btn",icon:t.appendIcon,variant:"text",onClick:i},null)])])}),{}}}),wt=O({allowedDates:[Array,Function],disabled:Boolean,displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String]},"calendar");function Dt(t){const o=J(),r=F(t,"modelValue",[],d=>X(d)),n=D(()=>t.displayValue?o.date(t.displayValue):r.value.length>0?o.date(r.value[0]):t.min?o.date(t.min):Array.isArray(t.allowedDates)?o.date(t.allowedDates[0]):o.date()),s=F(t,"year",void 0,d=>{const h=d!=null?Number(d):o.getYear(n.value);return o.startOfYear(o.setYear(o.date(),h))},d=>o.getYear(d)),v=F(t,"month",void 0,d=>{const h=d!=null?Number(d):o.getMonth(n.value),y=o.setYear(o.date(),o.getYear(s.value));return o.setMonth(y,h)},d=>o.getMonth(d)),c=D(()=>{const d=o.getWeekArray(v.value),h=d.flat(),y=6*7;if(h.length<y){const C=h[h.length-1];let M=[];for(let w=1;w<=y-h.length;w++)M.push(o.addDays(C,w)),w%7===0&&(d.push(M),M=[])}return d}),i=(d,h)=>d.map((y,C)=>{const M=o.toISO(y),w=!o.isSameMonth(y,v.value),b=o.isSameDay(y,o.startOfMonth(v.value)),m=o.isSameDay(y,o.endOfMonth(v.value)),E=o.isSameDay(y,v.value);return{date:y,isoDate:M,formatted:o.format(y,"keyboardDate"),year:o.getYear(y),month:o.getMonth(y),isDisabled:V(y),isWeekStart:C%7===0,isWeekEnd:C%7===6,isToday:o.isSameDay(y,h),isAdjacent:w,isHidden:w&&!t.showAdjacentMonths,isStart:b,isSelected:r.value.some(j=>o.isSameDay(y,j)),isEnd:m,isSame:E,localized:o.format(y,"dayOfMonth")}}),f=D(()=>{const d=o.startOfWeek(r.value),h=[];for(let M=0;M<=6;M++)h.push(o.addDays(d,M));const y=h,C=o.date();return i(y,C)}),u=D(()=>{const d=c.value.flat(),h=o.date();return i(d,h)}),l=D(()=>c.value.map(d=>d.length?qe(o,d[0]):null));function V(d){if(t.disabled)return!0;const h=o.date(d);return t.min&&o.isAfter(o.date(t.min),h)||t.max&&o.isAfter(h,o.date(t.max))?!0:Array.isArray(t.allowedDates)&&t.allowedDates.length>0?!t.allowedDates.some(y=>o.isSameDay(o.date(y),h)):typeof t.allowedDates=="function"?!t.allowedDates(h):!1}return{displayValue:n,daysInMonth:u,daysInWeek:f,genDays:i,model:r,weeksInMonth:c,weekNumbers:l}}const Ue=O({color:String,hideWeekdays:Boolean,multiple:Boolean,showWeek:Boolean,...wt()},"VDatePickerMonth"),Pe=z()({name:"VDatePickerMonth",props:Ue(),emits:{"update:modelValue":t=>!0,"update:month":t=>!0,"update:year":t=>!0},setup(t,o){let{emit:r,slots:n}=o;const s=Y(),{daysInMonth:v,model:c,weekNumbers:i}=Dt(t),f=J();function u(l){if(t.multiple){const V=c.value.findIndex(d=>f.isSameDay(d,l));if(V===-1)c.value=[...c.value,l];else{const d=[...c.value];d.splice(V,1),c.value=d}}else c.value=[l]}return()=>e("div",{class:"v-date-picker-month"},[t.showWeek&&e("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!t.hideWeekdays&&e("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[T("Â ")]),i.value.map(l=>e("div",{class:["v-date-picker-month__day","v-date-picker-month__day--adjacent"]},[l]))]),e("div",{ref:s,class:"v-date-picker-month__days"},[!t.hideWeekdays&&f.getWeekdays().map(l=>e("div",{class:["v-date-picker-month__day","v-date-picker-month__weekday"]},[l[0]])),v.value.map((l,V)=>{const d={props:{onClick:()=>u(l.date)},item:l,i:V};return e("div",{class:["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":l.isAdjacent,"v-date-picker-month__day--hide-adjacent":l.isHidden,"v-date-picker-month__day--selected":l.isSelected,"v-date-picker-month__day--week-end":l.isWeekEnd,"v-date-picker-month__day--week-start":l.isWeekStart}],"data-v-date":l.isDisabled?void 0:l.isoDate},[(t.showAdjacentMonths||!l.isAdjacent)&&e(ne,{defaults:{VBtn:{color:(l.isSelected||l.isToday)&&!l.isDisabled?t.color:void 0,disabled:l.isDisabled,icon:!0,ripple:!1,text:l.localized,variant:l.isDisabled?"text":l.isToday&&!l.isSelected?"outlined":"flat",onClick:()=>u(l.date)}}},{default:()=>{var h;return[((h=n.day)==null?void 0:h.call(n,d))??e($,d.props,null)]}})])})])])}}),He=O({color:String,height:[String,Number],modelValue:Number},"VDatePickerMonths"),Se=z()({name:"VDatePickerMonths",props:He(),emits:{"update:modelValue":t=>!0},setup(t,o){let{slots:r}=o;const n=J(),s=F(t,"modelValue"),v=D(()=>{let c=n.startOfYear(n.date());return Te(12).map(i=>{const f=n.format(c,"monthShort");return c=n.getNextMonth(c),{text:f,value:i}})});return Ae(()=>{s.value=s.value??n.getMonth(n.date())}),Z(()=>e("div",{class:"v-date-picker-months",style:{height:Ie(t.height)}},[e("div",{class:"v-date-picker-months__content"},[v.value.map((c,i)=>{var l;const f={active:s.value===i,color:s.value===i?t.color:void 0,rounded:!0,text:c.text,variant:s.value===c.value?"flat":"text",onClick:()=>u(i)};function u(V){s.value=V}return((l=r.month)==null?void 0:l.call(r,{month:c,i,props:f}))??e($,B({key:"month"},f,{onClick:()=>u(i)}),null)})])])),{}}}),Le=O({color:String,height:[String,Number],min:null,max:null,modelValue:Number},"VDatePickerYears"),Ce=z()({name:"VDatePickerYears",props:Le(),emits:{"update:modelValue":t=>!0},setup(t,o){let{slots:r}=o;const n=J(),s=F(t,"modelValue"),v=D(()=>{const i=n.getYear(n.date());let f=i-100,u=i+52;t.min&&(f=n.getYear(n.date(t.min))),t.max&&(u=n.getYear(n.date(t.max)));let l=n.startOfYear(n.date());return l=n.setYear(l,f),Te(u-f+1,f).map(V=>{const d=n.format(l,"year");return l=n.setYear(l,n.getYear(l)+1),{text:d,value:V}})});Ae(()=>{s.value=s.value??n.getYear(n.date())});const c=Y();return Ye(async()=>{var i;await Je(),(i=c.value)==null||i.$el.scrollIntoView({block:"center"})}),Z(()=>e("div",{class:"v-date-picker-years",style:{height:Ie(t.height)}},[e("div",{class:"v-date-picker-years__content"},[v.value.map((i,f)=>{var l;const u={ref:s.value===i.value?c:void 0,active:s.value===i.value,color:s.value===i.value?t.color:void 0,rounded:!0,text:i.text,variant:s.value===i.value?"flat":"text",onClick:()=>s.value=i.value};return((l=r.year)==null?void 0:l.call(r,{year:i,i:f,props:u}))??e($,B({key:"month"},u),null)})])])),{}}}),Pt=ct("v-picker-title"),Fe=O({bgColor:String,landscape:Boolean,title:String,hideHeader:Boolean,...ut()},"VPicker"),Me=z()({name:"VPicker",props:Fe(),setup(t,o){let{slots:r}=o;const{backgroundColorClasses:n,backgroundColorStyles:s}=Oe(Xe(t,"color"));return Z(()=>{const v=Ve.filterProps(t),c=!!(t.title||r.title);return e(Ve,B(v,{color:t.bgColor,class:["v-picker",{"v-picker--landscape":t.landscape,"v-picker--with-actions":!!r.actions},t.class],style:t.style}),{default:()=>{var i;return[!t.hideHeader&&e("div",{key:"header",class:[n.value],style:[s.value]},[c&&e(Pt,{key:"picker-title"},{default:()=>{var f;return[((f=r.title)==null?void 0:f.call(r))??t.title]}}),r.header&&e("div",{class:"v-picker__header"},[r.header()])]),e("div",{class:"v-picker__body"},[(i=r.default)==null?void 0:i.call(r)]),r.actions&&e(ne,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[e("div",{class:"v-picker__actions"},[r.actions()])]})]}})}),{}}}),St=O({header:{type:String,default:"$vuetify.datePicker.header"},...Re(),...Ue(),...te(He(),["modelValue"]),...te(Le(),["modelValue"]),...Fe({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),ke=z()({name:"VDatePicker",props:St(),emits:{"update:modelValue":t=>!0,"update:month":t=>!0,"update:year":t=>!0,"update:viewMode":t=>!0},setup(t,o){let{emit:r,slots:n}=o;const s=J(),{t:v}=et(),c=F(t,"modelValue",void 0,x=>X(x),x=>t.multiple?x:x[0]),i=F(t,"viewMode"),f=D(()=>{var I;const x=s.date((I=c.value)==null?void 0:I[0]);return x&&s.isValid(x)?x:s.date()}),u=Y(Number(t.month??s.getMonth(s.startOfMonth(f.value)))),l=Y(Number(t.year??s.getYear(s.startOfYear(s.setMonth(f.value,u.value))))),V=tt(!1),d=D(()=>t.multiple&&c.value.length>1?v("$vuetify.datePicker.itemsSelected",c.value.length):c.value[0]&&s.isValid(c.value[0])?s.format(c.value[0],"normalDateWithWeekday"):v(t.header)),h=D(()=>s.format(s.setYear(s.setMonth(s.date(),u.value),l.value),"monthAndYear")),y=D(()=>`date-picker-header${V.value?"-reverse":""}-transition`),C=D(()=>{const x=s.date(t.min);return t.min&&s.isValid(x)?x:null}),M=D(()=>{const x=s.date(t.max);return t.max&&s.isValid(x)?x:null}),w=D(()=>{if(t.disabled)return!0;const x=[];if(i.value!=="month")x.push("prev","next");else{let I=s.date();if(I=s.setYear(I,l.value),I=s.setMonth(I,u.value),C.value){const R=s.addDays(s.startOfMonth(I),-1);s.isAfter(C.value,R)&&x.push("prev")}if(M.value){const R=s.addDays(s.endOfMonth(I),1);s.isAfter(R,M.value)&&x.push("next")}}return x});function b(){u.value<11?u.value++:(l.value++,u.value=0)}function m(){u.value>0?u.value--:(l.value--,u.value=11)}function E(){i.value="month"}function j(){i.value=i.value==="months"?"month":"months"}function se(){i.value=i.value==="year"?"month":"year"}return de(u,()=>{i.value==="months"&&j(),r("update:month",u.value)}),de(l,()=>{i.value==="year"&&se(),r("update:year",l.value)}),de(c,(x,I)=>{const R=s.date(X(x)[0]),oe=s.date(X(I)[0]);V.value=s.isBefore(R,oe)}),Z(()=>{const x=Me.filterProps(t),I=we.filterProps(t),R=De.filterProps(t),oe=Pe.filterProps(t),Ge=te(Se.filterProps(t),["modelValue"]),Ke=te(Ce.filterProps(t),["modelValue"]),ie={header:d.value,transition:y.value};return e(Me,B(x,{class:["v-date-picker",`v-date-picker--${i.value}`,{"v-date-picker--show-week":t.showWeek},t.class],style:t.style}),{title:()=>{var A;return((A=n.title)==null?void 0:A.call(n))??e("div",{class:"v-date-picker__title"},[v(t.title)])},header:()=>n.header?e(ne,{defaults:{VDatePickerHeader:{...ie}}},{default:()=>{var A;return[(A=n.header)==null?void 0:A.call(n,ie)]}}):e(De,B({key:"header"},R,ie,{onClick:i.value!=="month"?E:void 0}),{...n,default:void 0}),default:()=>e(K,null,[e(we,B(I,{disabled:w.value,text:h.value,"onClick:next":b,"onClick:prev":m,"onClick:month":j,"onClick:year":se}),null),e(U,{hideOnLeave:!0},{default:()=>[i.value==="months"?e(Se,B({key:"date-picker-months"},Ge,{modelValue:u.value,"onUpdate:modelValue":A=>u.value=A,min:C.value,max:M.value}),null):i.value==="year"?e(Ce,B({key:"date-picker-years"},Ke,{modelValue:l.value,"onUpdate:modelValue":A=>l.value=A,min:C.value,max:M.value}),null):e(Pe,B({key:"date-picker-month"},oe,{modelValue:c.value,"onUpdate:modelValue":A=>c.value=A,month:u.value,"onUpdate:month":A=>u.value=A,year:l.value,"onUpdate:year":A=>l.value=A,min:C.value,max:M.value}),null)]})]),actions:n.actions})}),{}}}),S=t=>(Ne("data-v-502de50f"),t=t(),Be(),t),Ct=S(()=>_("span",{class:"text-button"},"Slots per day and Weekdays",-1)),Mt={key:0,class:"text-grey text-subtitle-2"},Tt={key:1,class:"text-primary text-subtitle-2"},At={key:"0"},It={key:"1"},Yt=S(()=>_("span",{class:"text-h6 text-button"},"Slot per day",-1)),Et=S(()=>_("span",{class:"d-block"},"Use the slider below to select how many slot is in a day ",-1)),Wt=S(()=>_("span",{class:"text-h6 text-button"},"Exclude",-1)),Nt=S(()=>_("span",{class:"d-block mb-8"},"Select week days that examinations will not take place on (example on sundays) ",-1)),Bt={key:0,class:"absolute center h-100 w-100 d-flex align-center justify-center opacity-70 rounded-md"},$t=S(()=>_("span",{class:"text-button"},"Starting and Ending Date",-1)),jt={key:0,class:"text-grey text-subtitle-2"},Ot={key:1,class:"text-primary text-subtitle-2"},Rt={key:"0"},Ut={key:"1"},Ht=S(()=>_("span",{class:"text-h6 text-button"},"Examination Starting and Ending Date",-1)),Lt=S(()=>_("span",{class:"d-block"},"Select The first day of the examinations and last day of the examination using the two calender below ",-1)),Ft=S(()=>_("span",{class:"text-button"},"Specific dates to exclude",-1)),zt={key:0,class:"text-grey text-subtitle-2"},Gt={key:1,class:"text-primary text-subtitle-2"},Kt={key:"0"},Qt={key:"1"},Zt=S(()=>_("span",{class:"text-h6"},"Select days to exclude",-1)),qt=S(()=>_("span",{class:"d-block text-subtitle-2"},"Select dates from the calendar below, that examinations will not be fixed on those days",-1)),Jt=S(()=>_("span",{class:"text-button"},"Excluded dates",-1)),Xt=S(()=>_("span",{class:"d-block text-subtitle-2"}," List of specific days examination will not be taking place on ",-1)),ea={class:"pa-8"},ta=S(()=>_("span",{class:"text-button"},"Examination days",-1)),aa={class:"text-h3"},la=S(()=>_("span",null,"The number of days the examination will occupy within the selected start and end date ",-1)),na=S(()=>_("span",{class:"text-button"},"Excluded days",-1)),sa={class:"text-h3"},oa=S(()=>_("span",null,"The number of days the examination will skip from the selected start and end date ",-1)),ia=S(()=>_("span",{class:"text-button"},"Total Slots",-1)),da={class:"text-h3"},ra=S(()=>_("div",{class:"mt-auto flex"},null,-1)),ca=Ee({__name:"date_slot",props:{timetablePk:{}},setup(t){const o=t,r=Qe(),n=r.retrieve(o.timetablePk),s=Y(n.value.slot_per_day),v=Y(n.value.start_date),c=Y(n.value.end_date),i=Y(n.value.excluded_week_days),f=Y(n.value.excluded_days),u=Y(!1);let l;Ye(()=>{at().hide()});function V(w,b){u.value=!0,l&&clearTimeout(l),l=setTimeout(()=>{u.value=!1},500);const m=w.getDay();if(i.value.includes(m))return!1;const E=w.getTime()<v.value.getTime();if([1,2].includes(b)&&E)return!1;const j=w.getTime()>c.value.getTime();return!([0,2].includes(b)&&j)}function d(w){f.value=f.value.filter(b=>b!=w)}const h=D(()=>st(v.value,c.value,i.value,f.value)),y=We().public,C=Y(!1);async function M(){try{C.value=!0;const w=await $fetch(`/timetables/${o.timetablePk}/configuration/`,{baseURL:y.baseURL,method:"POST",headers:je([]),body:{slot_per_day:s.value,start_date:ce(v.value),end_date:ce(c.value),excluded_days:f.value.map(b=>ce(b)),excluded_week_days:i.value}});r.insert(w),G().add({title:"Saved",text:"Configuration as saved successfully",icon:"mdi-check",color:"teal",closable:!0,duration:1e4})}catch(w){const b=w;if(b.status)switch(b.status){case 400:G().add({title:"Missing fields",text:"Make sure you provided the start and end date, and week days to exclude from the examination days",icon:"mdi-form-textbox",color:"red",closable:!0,duration:1e4});break;case 404:G().add({title:"Timetable deleted",text:"Could not find this timetable, it may have been deleted",icon:"mdi-delete-empty",color:"red",closable:!0,duration:1e4});break;default:G().add({title:"Oops",text:"Something went wrong on our server, please try again later",icon:"mdi-alert-circle-outline",color:"red",closable:!0,duration:1e4})}else{G().add({title:"Oops",text:"Could not connect to our server, please make sure you have a stable internet connection and type again",icon:"mdi-network-off",color:"red",closable:!0,duration:1e4});return}}finally{C.value=!1}}return(w,b)=>(g(),P(K,null,[e(ft,null,{default:a(()=>[e(ue,null,{default:a(()=>[e(me,null,{default:a(({expanded:m})=>[e(N,{align:"center"},{default:a(()=>[e(p,{cols:"auto"},{default:a(()=>[e(ve,{"aspect-ratio":1/1},{default:a(()=>[e(L,{color:m?"primary":void 0},{default:a(()=>[T("mdi-slot-machine")]),_:2},1032,["color"])]),_:2},1024)]),_:2},1024),e(p,{cols:"4",class:"d-flex flex-column justify-start"},{default:a(()=>[Ct,e(U,{"leave-absolute":""},{default:a(()=>[m?(g(),P("span",Tt,"Click to hide section's settings")):(g(),P("span",Mt,"Click to reveal settings"))]),_:2},1024)]),_:2},1024),e(p,{cols:"auto",class:"text-grey text-button"},{default:a(()=>[e(U,{"leave-absolute":""},{default:a(()=>[m?(g(),P("span",At," Select slots per day and weekdays to exclude ")):(g(),P("span",It,W(k(s))+" Slots per day, Exclude "+W(k(i).map(E=>k(ge)[E].short).join(", ")),1))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1}),e(fe,null,{default:a(()=>[e(N,null,{default:a(()=>[e(p,{class:"pa-8"},{default:a(()=>[Yt,Et,e(it,{density:"compact",max:"8",min:1,step:1,color:"primary","show-ticks":!0,hint:"Hint",ticks:[1,2,3,4,5,6,7,8],class:"mt-8",modelValue:k(s),"onUpdate:modelValue":b[0]||(b[0]=m=>H(s)?s.value=m:null)},null,8,["modelValue"])]),_:1}),e(q),e(p,{cols:12,class:"pa-8 pt-2"},{default:a(()=>[Wt,Nt,e(N,{"no-gutters":"",class:"relative"},{default:a(()=>[(g(!0),P(K,null,_e(k(ge),m=>(g(),ae(p,{cols:"3",key:m.value},{default:a(()=>[e(dt,{value:m.value,modelValue:k(i),"onUpdate:modelValue":b[1]||(b[1]=E=>H(i)?i.value=E:null),label:m.title,color:"red","base-color":"teal","true-icon":"mdi-close","false-icon":"mdi-check",hint:`Exclude ${m.title} from timetable days`},null,8,["value","modelValue","label","hint"])]),_:2},1024))),128)),k(u)?(g(),P("div",Bt,[e(ee,{indeterminate:""})])):ye("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(ue,null,{default:a(()=>[e(me,null,{default:a(({expanded:m})=>[e(N,{align:"center"},{default:a(()=>[e(p,{cols:"auto"},{default:a(()=>[e(ve,{"aspect-ratio":1/1},{default:a(()=>[e(L,{color:m?"primary":void 0},{default:a(()=>[T("mdi-calendar")]),_:2},1032,["color"])]),_:2},1024)]),_:2},1024),e(p,{cols:"4",class:"d-flex flex-column justify-start text-button"},{default:a(()=>[$t,e(U,{"leave-absolute":""},{default:a(()=>[m?(g(),P("span",Ot,"Click to hide section's settings")):(g(),P("span",jt,"Click to reveal settings"))]),_:2},1024)]),_:2},1024),e(p,{cols:"auto",class:"text-grey text-button"},{default:a(()=>[e(U,{"leave-absolute":""},{default:a(()=>[m?(g(),P("span",Rt," Select slots per day and weekdays to exclude ")):(g(),P("span",Ut," from "+W(k(re)(k(v)))+" to "+W(k(re)(k(c))),1))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1}),e(fe,null,{default:a(()=>[e(N,null,{default:a(()=>[e(p,{cols:"12",class:"pa-8"},{default:a(()=>[Ht,Lt]),_:1}),e(p,{cols:12,lg:6},{default:a(()=>[e(ke,{title:"Select Start Date",landscape:!0,reactive:!0,"show-week":!0,"show-adjacent-months":!0,modelValue:k(v),"onUpdate:modelValue":b[2]||(b[2]=m=>H(v)?v.value=m:null),"min-width":"100%","allowed-dates":m=>V(m,0)},null,8,["modelValue","allowed-dates"])]),_:1}),e(q,{vertical:""}),e(p,{cols:12,lg:6},{default:a(()=>[e(ke,{title:"Select End Date",landscape:!0,reactive:!0,"show-week":!0,"show-adjacent-months":!0,modelValue:k(c),"onUpdate:modelValue":b[3]||(b[3]=m=>H(c)?c.value=m:null),"min-width":"100%","allowed-dates":m=>V(m,1)},null,8,["modelValue","allowed-dates"])]),_:1})]),_:1})]),_:1})]),_:1}),e(ue,null,{default:a(()=>[e(me,null,{default:a(({expanded:m})=>[e(N,{align:"center"},{default:a(()=>[e(p,{cols:"auto"},{default:a(()=>[e(ve,{"aspect-ratio":1/1},{default:a(()=>[e(L,{color:m?"primary":void 0},{default:a(()=>[T("mdi-close-box-multiple")]),_:2},1032,["color"])]),_:2},1024)]),_:2},1024),e(p,{cols:"4",class:"d-flex flex-column justify-start text-button"},{default:a(()=>[Ft,e(U,{"leave-absolute":""},{default:a(()=>[m?(g(),P("span",Gt,"Click to hide section's settings")):(g(),P("span",zt,"Click to reveal settings"))]),_:2},1024)]),_:2},1024),e(p,{cols:"auto",class:"text-grey text-button"},{default:a(()=>[e(U,{"leave-absolute":""},{default:a(()=>[m?(g(),P("span",Kt," Select specific days to exclude ")):(g(),P("span",Qt,W(k(f).length)+" Days excluded ",1))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1}),e(fe,null,{default:a(()=>[e(N,null,{default:a(()=>[e(p,{cols:12,lg:7,class:"px-8 pt-6"},{default:a(()=>[Zt,qt,e(p,{cols:12,class:""},{default:a(()=>[e(ke,{title:"Exclude Days","min-width":"100%",color:"red",landscape:!0,multiple:!0,reactive:!0,"show-week":!0,"show-adjacent-months":!0,modelValue:k(f),"onUpdate:modelValue":b[4]||(b[4]=m=>H(f)?f.value=m:null),"allowed-dates":m=>V(m,2)},null,8,["modelValue","allowed-dates"])]),_:1})]),_:1}),e(q,{vertical:""}),e(p,{cols:12,lg:5},{default:a(()=>[e(pe,null,{default:a(()=>[e(Q,null,{default:a(()=>[Jt,Xt]),_:1}),e(ot,{group:""},{default:a(()=>[(g(!0),P(K,null,_e(k(f),(m,E)=>(g(),P("div",{key:m.toString()},[E>0?(g(),ae(q,{key:0})):ye("",!0),e(Q,{class:"py-4"},{append:a(()=>[e(mt,{bottom:""},{activator:a(({props:j})=>[e(L,B(j,{onClick:se=>d(m)}),{default:a(()=>[T("mdi-close")]),_:2},1040,["onClick"])]),default:a(()=>[T(" Remove date ")]),_:2},1024)]),default:a(()=>[T(W(k(re)(m))+" ",1)]),_:2},1024)]))),128))]),_:1}),e(Q)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),_("div",ea,[e(N,null,{default:a(()=>[e(p,{cols:12,lg:4,class:"d-flex flex-column"},{default:a(()=>[ta,_("span",aa,W(k(h).allowed)+" Days ",1),la]),_:1}),e(p,{cols:12,lg:4,class:"d-flex flex-column"},{default:a(()=>[na,_("span",sa,W(k(h).excluded)+" Days ",1),oa]),_:1}),e(p,{cols:12,lg:4,class:"d-flex flex-column"},{default:a(()=>[ia,_("span",da,W(k(h).allowed*k(s))+" Slots ",1)]),_:1})]),_:1}),e(N,{class:"mt-8"},{default:a(()=>[e(le),e(p,{cols:"12",lg:4,class:"pl-4 pt-auto d-flex flex-column"},{default:a(()=>[ra,e($,{color:"red",size:"large",block:"","prepend-icon":"mdi-delete",class:"ml-auto mb-4",disabled:k(C)},{default:a(()=>[T("Discard")]),_:1},8,["disabled"]),e($,{color:"primary",size:"large",block:"","prepend-icon":"mdi-content-save",onClick:M,loading:k(C)},{default:a(()=>[T("Save")]),_:1},8,["loading"])]),_:1})]),_:1})])],64))}}),ua=$e(ca,[["__scopeId","data-v-502de50f"]]),ze=t=>(Ne("data-v-6caab202"),t=t(),Be(),t),ma=ze(()=>_("span",{class:"text-h6 text-uppercase"},"Timetable Configuration",-1)),fa={class:"fullscreen d-flex flex-column justify-center align-center"},va=ze(()=>_("span",{class:"text-subtitle-1 d-block my-2 text-white"},"Generating table ...",-1)),ha=Ee({__name:"timetable__configuration",props:{timetablePk:{},active:{type:Boolean}},setup(t){const o=t,r=Y(0),n=Y(!1),s=D(()=>n.value),v=[{title:"Date and Slots",icon:"mdi-calendar",action(){r.value=0}},{title:"Generate Timetable",icon:"mdi-run-fast",action(){f()}}],c=We(),i=G();async function f(){try{n.value=!0,await $fetch(`/timetables/${o.timetablePk}/generate/`,{baseURL:c.public.baseURL,headers:je([])}),i.add({color:"teal",title:"Timetable generated",text:"The timetable was successfully generated, click on ViewTable above to view it",icon:"mdi-check-all",closable:!1,action(u){u()}}),nt().push({name:"time-tables-timetable_pk-view",params:{timetable_pk:o.timetablePk}})}catch(u){u.status||i.add({title:"Oops, generating table failed",text:"Could not connect to the server, make sure you have a stable internet connection and try again.",icon:"mdi-wifi-remove",closable:!1,duration:1e4,color:"red",action(V){V()}})}finally{n.value=!1}}return(u,l)=>{const V=ua;return g(),P(K,null,[u.active?(g(),ae(ht,{key:0,permanent:"",fixed:"",location:"right",width:"300"},{default:a(()=>[e(vt,{flat:"",color:"transparent"},{default:a(()=>[e(pe,null,{default:a(()=>[e(Q,null,{default:a(()=>[e(he,{class:"title"},{default:a(()=>[T(" Primary Actions ")]),_:1})]),_:1})]),_:1})]),_:1}),e(q),e(pe,{class:"pt-0"},{default:a(()=>[(g(),P(K,null,_e(v,(d,h)=>e(Q,{link:"",active:k(r)==h,color:"primary",key:d.title,onClick:d.action,disabled:k(n)==!0},{prepend:a(()=>[e(L,null,{default:a(()=>[T(W(d.icon),1)]),_:2},1024)]),default:a(()=>[e(he,null,{default:a(()=>[T(W(d.title),1)]),_:2},1024)]),_:2},1032,["active","onClick","disabled"])),64)),xe(e(Q,{link:"",disabled:""},{prepend:a(()=>[e(L,null,{default:a(()=>[e(ee,{indeterminate:"",color:"primary"})]),_:1})]),default:a(()=>[e(he,null,{default:a(()=>[T("Generating")]),_:1})]),_:1},512),[[be,k(n)]])]),_:1})]),_:1})):ye("",!0),e(gt,null,{default:a(()=>[e(N,null,{default:a(()=>[e(le),e(p,{cols:"auto",class:"d-flex flex-column items-center justify-center align-center"},{default:a(()=>[ma,e(kt,{type:"info",value:!0},{default:a(()=>[_("span",null,[T("Click on the ("),e(L,null,{default:a(()=>[T("mdi-menu-down")]),_:1}),T(") icon to view section")])]),_:1})]),_:1}),e(le),e(p,{cols:"12"},{default:a(()=>[e(_t,null,{default:a(()=>[e(yt,{class:"pa-0"},{default:a(()=>[e(N,null,{default:a(()=>[e(p,{cols:"12",class:""},{default:a(()=>[e(pt,{modelValue:k(r),"onUpdate:modelValue":l[0]||(l[0]=d=>H(r)?r.value=d:null)},{default:a(()=>[e(bt,{value:0},{default:a(()=>[(g(),ae(lt,null,{fallback:a(()=>[e(ee,{indeterminate:""})]),default:a(()=>[e(V,{"timetable-pk":o.timetablePk},null,8,["timetable-pk"])]),_:1}))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),xe(e(xt,{modelValue:k(s),"onUpdate:modelValue":l[1]||(l[1]=d=>H(s)?s.value=d:null),"close-on-content-click":!1,origin:"overlap",class:"overlay"},{default:a(()=>[_("div",fa,[e(ee,{color:"primary",indeterminate:""}),va])]),_:1},8,["modelValue"]),[[be,k(s)]])]),_:1})],64)}}}),Ja=$e(ha,[["__scopeId","data-v-6caab202"]]);export{Ja as default};
